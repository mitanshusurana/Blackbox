import{d as k,f as D,g as I}from"./chunk-V46R4NJB.js";import{b as R,c as E,d as W,e as x,f as O,g as A,h as N,i as F,j as G,k as V,l as B,m as L}from"./chunk-PSSBOTQR.js";import{$a as _,Ka as S,Na as y,Oa as b,Ta as n,Ua as i,Va as d,Za as f,_a as l,ac as P,ba as T,cc as v,ia as h,ib as a,ja as C,mb as p,nb as u,ob as g,qb as w,ya as s,za as M}from"./chunk-LGXW2I33.js";function j(m,c){if(m&1){let r=f();n(0,"div")(1,"label",18),a(2,"Cash Taken:"),i(),n(3,"input",19),g("ngModelChange",function(o){h(r);let t=_();return u(t.transaction.cashTaken,o)||(t.transaction.cashTaken=o),C(o)}),i()()}if(m&2){let r=_();s(3),p("ngModel",r.transaction.cashTaken)}}function z(m,c){if(m&1){let r=f();n(0,"div")(1,"label",20),a(2,"Cash Given:"),i(),n(3,"input",21),g("ngModelChange",function(o){h(r);let t=_();return u(t.transaction.cashGiven,o)||(t.transaction.cashGiven=o),C(o)}),i()()}if(m&2){let r=_();s(3),p("ngModel",r.transaction.cashGiven)}}var q=class m{constructor(c){this.router=c;this.partyControl.valueChanges.subscribe(r=>{this.checkParty(r)})}partyControl=new O;transaction={type:"",description:"",weight:0,rate:0,purity:0,amount:0,cashTaken:0,cashGiven:0,party:null};parties=[{id:1,name:"Party A"},{id:2,name:"Party B"},{id:3,name:"Party C"}];setTransactionType(c){this.transaction.type=c,c==="sale"?this.transaction.cashGiven=0:c==="purchase"&&(this.transaction.cashTaken=0)}onAddParty(){this.router.navigate(["/create-party"]).then(()=>{})}onSubmit(c){console.log("Transaction recorded:",this.transaction),c.resetForm()}calculateAmount(){this.transaction.amount=this.transaction.rate*(this.transaction.purity/100)*this.transaction.weight}checkParty(c){console.log("Checking party:",c);let r=this.parties.some(e=>e.name===c);console.log("Party exists:",r),r||this.router.navigate(["/create-party"])}resetForm(){this.transaction={type:"",description:"",weight:0,rate:0,purity:0,amount:0,cashTaken:0,cashGiven:0,party:null}}navigateToAccTransaction(){this.router.navigate(["/acc-transaction"])}static \u0275fac=function(r){return new(r||m)(M(k))};static \u0275cmp=T({type:m,selectors:[["app-record-transaction"]],standalone:!0,features:[w],decls:44,vars:14,consts:[[3,"ngSubmit"],["for","type"],["type","button",3,"click"],["for","party"],["bindLabel","name","name","party",3,"add","items","formControl","searchable"],["for","description"],["type","text","id","description","name","description","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","number","id","weight","name","weight","required","",3,"ngModelChange","input","ngModel"],["for","rate"],["type","number","id","rate","name","rate","required","",3,"ngModelChange","input","ngModel"],["for","purity"],["type","number","id","purity","name","purity","required","",3,"ngModelChange","input","ngModel"],["for","amount"],["type","number","id","amount","name","amount","readonly","",3,"ngModelChange","ngModel"],[4,"ngIf"],["type","submit"],["type","reset",3,"click"],["for","cashTaken"],["type","number","id","cashTaken","name","cashTaken",3,"ngModelChange","ngModel"],["for","cashGiven"],["type","number","id","cashGiven","name","cashGiven",3,"ngModelChange","ngModel"]],template:function(r,e){r&1&&(n(0,"h1"),a(1,"Record Transaction"),i(),n(2,"form",0),l("ngSubmit",function(t){return e.onSubmit(t)}),n(3,"label",1),a(4,"Transaction Type:"),i(),n(5,"div")(6,"button",2),l("click",function(){return e.setTransactionType("sale")}),a(7,"Sale"),i(),n(8,"button",2),l("click",function(){return e.setTransactionType("purchase")}),a(9,"Purchase"),i(),n(10,"button",2),l("click",function(){return e.navigateToAccTransaction()}),a(11,"Account"),i()(),d(12,"br"),n(13,"label",3),a(14,"Party:"),i(),n(15,"ng-select",4),l("add",function(){return e.onAddParty()}),i(),d(16,"br"),n(17,"label",5),a(18,"Description:"),i(),n(19,"input",6),g("ngModelChange",function(t){return u(e.transaction.description,t)||(e.transaction.description=t),t}),i(),d(20,"br"),n(21,"label",7),a(22,"Weight:"),i(),n(23,"input",8),g("ngModelChange",function(t){return u(e.transaction.weight,t)||(e.transaction.weight=t),t}),l("input",function(){return e.calculateAmount()}),i(),d(24,"br"),n(25,"label",9),a(26,"Rate:"),i(),n(27,"input",10),g("ngModelChange",function(t){return u(e.transaction.rate,t)||(e.transaction.rate=t),t}),l("input",function(){return e.calculateAmount()}),i(),d(28,"br"),n(29,"label",11),a(30,"Purity (%):"),i(),n(31,"input",12),g("ngModelChange",function(t){return u(e.transaction.purity,t)||(e.transaction.purity=t),t}),l("input",function(){return e.calculateAmount()}),i(),d(32,"br"),n(33,"label",13),a(34,"Amount:"),i(),n(35,"input",14),g("ngModelChange",function(t){return u(e.transaction.amount,t)||(e.transaction.amount=t),t}),i(),d(36,"br"),S(37,j,4,1,"div",15)(38,z,4,1,"div",15),d(39,"br"),n(40,"button",16),a(41,"Record Transaction"),i(),n(42,"button",17),l("click",function(){return e.resetForm()}),a(43,"Reset"),i()()),r&2&&(s(6),b("active",e.transaction.type==="sale"),s(2),b("active",e.transaction.type==="purchase"),s(7),y("items",e.parties)("formControl",e.partyControl)("searchable",!0),s(4),p("ngModel",e.transaction.description),s(4),p("ngModel",e.transaction.weight),s(4),p("ngModel",e.transaction.rate),s(4),p("ngModel",e.transaction.purity),s(4),p("ngModel",e.transaction.amount),s(2),y("ngIf",e.transaction.type==="sale"),s(),y("ngIf",e.transaction.type==="purchase"))},dependencies:[B,N,R,F,E,W,V,A,x,I,D,L,G,v,P],styles:["form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:8px;background-color:#f9f9f9}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:700}input[_ngcontent-%COMP%], ng-select[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:16px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer;margin-right:10px}button.active[_ngcontent-%COMP%]{background-color:#0056b3}button[type=submit][_ngcontent-%COMP%]{background-color:#28a745}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}button[type=button][_ngcontent-%COMP%]:hover{background-color:#0056b3}button[type=reset][_ngcontent-%COMP%]{background-color:#dc3545}button[type=reset][_ngcontent-%COMP%]:hover{background-color:#c82333}.ng-select[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;background-color:#fff}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border:none}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-value-container[_ngcontent-%COMP%], .ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]   .ng-input[_ngcontent-%COMP%]{padding:8px}"]})};export{q as RecordTransactionComponent};
